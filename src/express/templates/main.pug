extends layout.pug

block prepend head
  meta(name="Description" content="Личный блог Типотека")

block prepend body
  -var wrapperClasses=["wrapper"]

//- block append body
//-   script(src="js/web-socket-main.js")

block prepend header

block content
  main.main-page
    h1.visually-hidden &Gcy;&lcy;&acy;&vcy;&ncy;&acy;&yacy; &scy;&tcy;&rcy;&acy;&ncy;&icy;&tscy;&acy; &lcy;&icy;&chcy;&ncy;&ocy;&gcy;&ocy; &bcy;&lcy;&ocy;&gcy;&acy; &Tcy;&icy;&pcy;&ocy;&tcy;&iecy;&kcy;&acy;
    p
      | &Ecy;&tcy;&ocy; &pcy;&rcy;&icy;&vcy;&iecy;&tcy;&scy;&tcy;&vcy;&iecy;&ncy;&ncy;&ycy;&jcy; &tcy;&iecy;&kcy;&scy;&tcy;, &kcy;&ocy;&tcy;&ocy;&rcy;&ycy;&jcy; &vcy;&lcy;&acy;&dcy;&iecy;&lcy;&iecy;&tscy; &bcy;&lcy;&ocy;&gcy;&acy; &mcy;&ocy;&zhcy;&iecy;&tcy; &vcy;&ycy;&bcy;&rcy;&acy;&tcy;&softcy;, &chcy;&tcy;&ocy;&bcy;&ycy; &ocy;&pcy;&icy;&scy;&acy;&tcy;&softcy; &scy;&iecy;&bcy;&yacy; &#x1F44F;
    if posts.length  
      section.main-page__theme-list
        h2.visually-hidden &Scy;&pcy;&icy;&scy;&ocy;&kcy; &tcy;&iecy;&mcy;
        include includes/categories.pug
      .main-page__section-flex(class=`${popularPosts.length > 0 && comments.length > 0 ? `` : `main-page__section-flex--short`}`)
        section.main-page__hot.hot
          h2.hot__name
            | &Scy;&acy;&mcy;&ocy;&iecy; &ocy;&bcy;&scy;&ucy;&zhcy;&dcy;&acy;&iecy;&mcy;&ocy;&iecy; 
            span.hot__icon.hot__icon--fire
          if popularPosts.length
            ul.hot__list
              each hotPost in popularPosts
                li.hot__list-item
                  a.hot__list-link(href=`/articles/${hotPost.id}`) #{hotPost.announce}
                    sup.hot__link-sup #{hotPost.comment_count}
          else
            p.hot__empty &Zcy;&dcy;&iecy;&scy;&softcy; &pcy;&ocy;&kcy;&acy; &ncy;&icy;&chcy;&iecy;&gcy;&ocy; &ncy;&iecy;&tcy;...

        section.main-page__last.last
          h2.last__name
            | &Pcy;&ocy;&scy;&lcy;&iecy;&dcy;&ncy;&icy;&iecy; &kcy;&ocy;&mcy;&mcy;&iecy;&ncy;&tcy;&acy;&rcy;&icy;&icy; 
            span.last__icon.last__icon--cloud
          if comments.length
            ul.last__list
              each comment in comments
                li.last__list-item
                  img.last__list-image(src=`img/avatars/${comment.author.avatar.name}` width='20' height='20' alt='Аватар пользователя')
                  b.last__list-name #{`${comment.author.firstname} ${comment.author.lastname}`}
                  a.last__list-link(href=`/articles/${comment.post.id}`) #{comment.text}
          else
            p.last__empty &Zcy;&dcy;&iecy;&scy;&softcy; &pcy;&ocy;&kcy;&acy; &ncy;&icy;&chcy;&iecy;&gcy;&ocy; &ncy;&iecy;&tcy;...
      section.main-page__list.preview
        h2.visually-hidden &Scy;&pcy;&icy;&scy;&ocy;&kcy; &pcy;&rcy;&iecy;&vcy;&softcy;&yucy; &scy;&tcy;&acy;&tcy;&iecy;&jcy;
        ul.preview__list
          each post in posts
            include includes/post-preview.pug
        .preview__toggle-wrapper
          include includes/paginator.pug
    else
      .main-page__empty-wrapper
        p.main-page__empty-text &Zcy;&dcy;&iecy;&scy;&softcy; &pcy;&ocy;&kcy;&acy; &pcy;&ucy;&scy;&tcy;&ocy;!

